{
  "model_settings": {
    "model_name": "gpt-4o-mini",
    "temperature": 0.7,
    "max_tokens": 1500,
    "top_p": 1.0,
    "frequency_penalty": 0.0,
    "presence_penalty": 0.0
  },
  "api_settings": {
    "base_url": "https://api.openai.com/v1",
    "timeout": 30,
    "max_retries": 3,
    "retry_delay": 1
  },
  "conversation_settings": {
    "max_history_length": 20,
    "context_window": 8000,
    "system_prompt_file": "system_prompt.txt"
  },
  "lta_api_settings": {
    "base_url": "https://datamall2.mytransport.sg/ltaodataservice",
    "endpoints": {
      "bus_arrival": "/v3/BusArrival",
      "carpark_availability": "/CarParkAvailabilityv2"
    },
    "rate_limits": {
      "requests_per_minute": 500,
      "requests_per_day": 5000
    },
    "timeout": 10,
    "max_retries": 2
  },
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "get_bus_arrival",
        "description": "STEP 2: Get real-time bus arrival information for a specific bus stop code. Use this when: 1) User provides a 5-digit bus stop code directly, OR 2) User has selected a bus stop from the options provided by find_bus_stops_by_location. This gives live arrival times, crowding info, and estimated arrival minutes.",
        "parameters": {
          "type": "object",
          "properties": {
            "bus_stop_code": {
              "type": "string",
              "description": "The 5-digit bus stop code (e.g., '01012', '28009')"
            },
            "service_no": {
              "type": "string",
              "description": "Optional specific bus service number to filter results"
            }
          },
          "required": ["bus_stop_code"]
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "get_bus_arrivals_by_location",
        "description": "DEPRECATED: Use the 2-step approach instead. For location queries: 1) Use find_bus_stops_by_location first, 2) Let user choose, 3) Use get_bus_arrival. Only use this function if you need to get arrivals for multiple stops at once without user interaction.",
        "parameters": {
          "type": "object",
          "properties": {
            "location_query": {
              "type": "string",
              "description": "Location name or description to search for nearby bus stops (e.g., 'Ang Mo Kio Hub', 'ION Orchard', 'Marina Bay Sands')"
            },
            "service_no": {
              "type": "string",
              "description": "Optional specific bus service number to filter results"
            },
            "max_stops": {
              "type": "integer",
              "description": "Maximum number of bus stops to show (default: 5, max: 10)"
            }
          },
          "required": ["location_query"]
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "find_bus_stops_by_location",
        "description": "STEP 1: Find bus stops near a location when user mentions a place name instead of a bus stop code. Use this as the FIRST STEP when users ask for bus arrivals at locations like 'ION Orchard', 'Bras Basah Complex', 'Marina Bay Sands', etc. Present the options to user for confirmation before getting arrival times.",
        "parameters": {
          "type": "object",
          "properties": {
            "location_query": {
              "type": "string",
              "description": "Location name or description to search for nearby bus stops"
            },
            "max_results": {
              "type": "integer",
              "description": "Maximum number of bus stops to return (default: 5, max: 10)"
            }
          },
          "required": ["location_query"]
        }
      }
    },
    {
      "type": "function",
      "function": {
        "name": "get_carpark_availability",
        "description": "Get real-time carpark availability information",
        "parameters": {
          "type": "object",
          "properties": {
            "carpark_id": {
              "type": "string",
              "description": "Optional specific carpark ID to filter results"
            },
            "area": {
              "type": "string",
              "description": "Optional area filter (e.g., Orchard, Marina, HarbourFront, Jurong Lake District)"
            }
          }
        }
      }
    }
  ]
}